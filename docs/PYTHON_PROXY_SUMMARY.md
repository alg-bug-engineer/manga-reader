# ğŸ‰ Python ä»£ç†æ–¹æ¡ˆå®Œæˆï¼

## âœ… å·²åˆ›å»ºçš„æ–‡ä»¶

### Python æœåŠ¡å™¨
```
gemini_proxy_server.py          # Python Flask ä»£ç†æœåŠ¡å™¨
requirements.txt                # Python ä¾èµ–
start-proxy-server.sh           # å¯åŠ¨è„šæœ¬
```

### Node.js å®¢æˆ·ç«¯
```
lib/services/geminiServiceProxy.ts  # Node.js è°ƒç”¨å®¢æˆ·ç«¯
```

### æ–‡æ¡£
```
PYTHON_PROXY_GUIDE.md           # å®Œæ•´ä½¿ç”¨æŒ‡å—
```

---

## ğŸš€ ç«‹å³ä½¿ç”¨ï¼ˆ3 æ­¥ï¼‰

### 1. å¯åŠ¨ Python æœåŠ¡å™¨

```bash
# æ–¹å¼ 1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
./start-proxy-server.sh

# æ–¹å¼ 2: æ‰‹åŠ¨å¯åŠ¨
python3 gemini_proxy_server.py
```

### 2. å¯åŠ¨ Node.js åº”ç”¨

```bash
# æ–°ç»ˆç«¯çª—å£
npm run dev
```

### 3. è®¿é—®åº”ç”¨

```
http://localhost:3000/generate-comic
```

---

## ğŸ“Š å·¥ä½œæµç¨‹

```
ç”¨æˆ·è¾“å…¥ "RAG"
    â†“
Node.js å‰ç«¯æ¥æ”¶
    â†“
è°ƒç”¨ Python ä»£ç†æœåŠ¡å™¨ (3001)
    â†“
Python ä½¿ç”¨ Google Genai SDK
    â†“
è‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿä»£ç†è®¿é—® Gemini API
    â†“
è¿”å›ç”Ÿæˆçš„è„šæœ¬/å›¾ç‰‡
    â†“
Node.js å‰ç«¯å±•ç¤º
```

---

## ğŸ”¥ æ ¸å¿ƒä¼˜åŠ¿

### ä¸ºä»€ä¹ˆè¿™ä¸ªæ–¹æ¡ˆæœ€å¥½ï¼Ÿ

1. **Python SDK è‡ªåŠ¨ä»£ç†** âœ…
   - Python çš„ `requests` å’Œ Google SDK ä¼š**è‡ªåŠ¨**ä½¿ç”¨ç³»ç»Ÿä»£ç†
   - å°±åƒ Bash çš„ `curl` ä¸€æ ·ï¼Œä¸éœ€è¦ä»»ä½•é…ç½®

2. **å®˜æ–¹ SDK æ”¯æŒ** âœ…
   - ä½¿ç”¨ Google å®˜æ–¹çš„ `google-genai` SDK
   - ç¨³å®šã€å¯é ã€æ–‡æ¡£å®Œå–„

3. **ç®€å•æ˜“æ‡‚** âœ…
   - ä»£ç æ¸…æ™°ï¼Œå®¹æ˜“è°ƒè¯•
   - å‡ºé—®é¢˜ç›´æ¥çœ‹ Python çš„é”™è¯¯è¾“å‡º

4. **åˆ†ç¦»å…³æ³¨ç‚¹** âœ…
   - Python å¤„ç† API è°ƒç”¨
   - Node.js å¤„ç†å‰ç«¯é€»è¾‘
   - å„è‡ªå‘æŒ¥ä¼˜åŠ¿

---

## ğŸ¯ æµ‹è¯•è¿æ¥

### æµ‹è¯• Python æœåŠ¡å™¨

```bash
# 1. å¯åŠ¨æœåŠ¡å™¨
./start-proxy-server.sh

# 2. æµ‹è¯•å¥åº·çŠ¶æ€
curl http://127.0.0.1:3001/health
```

**é¢„æœŸè¾“å‡ºï¼š**
```json
{
  "status": "ok",
  "client_initialized": true,
  "has_api_key": true
}
```

---

## ğŸ“ æ—¥å¸¸ä½¿ç”¨

### å®Œæ•´å¯åŠ¨

**ç»ˆç«¯ 1ï¼š**
```bash
./start-proxy-server.sh
```

**ç»ˆç«¯ 2ï¼š**
```bash
npm run dev
```

å°±è¿™ä¹ˆç®€å•ï¼

---

## ğŸ”§ éœ€è¦å¸®åŠ©ï¼Ÿ

### å¸¸è§é—®é¢˜

**Q: Python ä¾èµ–å®‰è£…å¤±è´¥ï¼Ÿ**
```bash
# å‡çº§ pip
pip3 install --upgrade pip

# é‡æ–°å®‰è£…
pip3 install -r requirements.txt
```

**Q: ç«¯å£ 3001 è¢«å ç”¨ï¼Ÿ**
```bash
# æŸ¥çœ‹å ç”¨è¿›ç¨‹
lsof -i :3001

# æ€æ‰è¿›ç¨‹
kill -9 <PID>

# æˆ–ä¿®æ”¹ç«¯å£ï¼ˆç¼–è¾‘ gemini_proxy_server.pyï¼‰
port = 3002
```

**Q: ä»£ç†è¿æ¥å¤±è´¥ï¼Ÿ**
- ç¡®ä¿ä½ çš„ä»£ç†è½¯ä»¶ï¼ˆClash/V2Rayï¼‰æ­£åœ¨è¿è¡Œ
- æ£€æŸ¥ä»£ç†ç«¯å£æ˜¯å¦æ­£ç¡®ï¼ˆé»˜è®¤ 7890ï¼‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **[PYTHON_PROXY_GUIDE.md](./PYTHON_PROXY_GUIDE.md)** - å®Œæ•´ä½¿ç”¨æŒ‡å—
- **[requirements.txt](./requirements.txt)** - Python ä¾èµ–
- **[gemini_proxy_server.py](./gemini_proxy_server.py)** - æœåŠ¡å™¨æºç 

---

## âœ¨ æ€»ç»“

**è¿™ä¸ªæ–¹æ¡ˆè§£å†³äº†ä»€ä¹ˆï¼Ÿ**

1. âœ… Node.js çš„ä»£ç†é…ç½®é—®é¢˜
2. âœ… ä¸éœ€è¦å®‰è£… `https-proxy-agent`
3. âœ… ä¸éœ€è¦å¤æ‚çš„ä»£ç†é…ç½®
4. âœ… Python è‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿä»£ç†
5. âœ… ç®€å•ã€ç¨³å®šã€å¯é 

**ç°åœ¨å¼€å§‹ä½¿ç”¨ï¼š**

```bash
# 1. å¯åŠ¨ Python æœåŠ¡å™¨
./start-proxy-server.sh

# 2. å¯åŠ¨ Node.js åº”ç”¨ï¼ˆæ–°ç»ˆç«¯ï¼‰
npm run dev

# 3. è®¿é—®ç”Ÿæˆå™¨
# http://localhost:3000/generate-comic
```

å°±æ˜¯è¿™ä¹ˆç®€å•ï¼ğŸ‰

---

*å®Œæˆæ—¶é—´ï¼š2025-12-31*
*æ–¹æ¡ˆï¼šPython ä»£ç†æœåŠ¡å™¨*
*çŠ¶æ€ï¼šâœ… å·²å®Œæˆå¹¶æµ‹è¯•*
